<template>
  <div class="menu">
    <div class="menu__inner">
      <div :class="['menu__el', getZeroActiveIndex]" @click="changeActiveIndex(0)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.3705 18.9135C15.3705 16.7745 13.6365 15.0405 11.4975 15.0405H10.4977C9.97875 15.0405 9.558 14.6197 9.558 14.1007C9.558 13.908 9.636 13.7235 9.77325 13.5885C10.3545 13.0215 10.8435 12.261 11.1975 11.442C11.2695 11.4952 11.3468 11.5335 11.4338 11.5335C11.9955 11.5335 12.6547 10.293 12.6547 9.44698C12.6547 8.60098 12.5767 7.91548 12.0142 7.91548C11.9482 7.91548 11.877 7.92673 11.8057 7.94473C11.766 5.65123 11.1863 2.78998 7.6845 2.78998C4.0305 2.78998 3.60375 5.64598 3.56325 7.93723C3.51225 7.92748 3.45975 7.91623 3.4125 7.91623C2.85075 7.91623 2.77275 8.60173 2.77275 9.44773C2.77275 10.2937 3.432 11.5342 3.99375 11.5342C4.06275 11.5342 4.12725 11.5147 4.18725 11.4802C4.53975 12.2865 5.02275 13.0327 5.59575 13.59C5.73375 13.725 5.811 13.9095 5.811 14.1022C5.811 14.6212 5.39025 15.042 4.87125 15.042H3.873C1.734 15.0405 0 16.7745 0 18.9135V19.9875C0 20.6625 0.5475 21.2107 1.22325 21.2107H14.1473C14.8238 21.2107 15.3713 20.6632 15.3713 19.9875L15.3705 18.9135Z" fill="#DDDDDD"/>
          <path d="M12.2549 4.41449C12.5676 5.10674 12.7911 5.95874 12.8849 7.01324C13.1166 7.15574 13.2891 7.38674 13.4316 7.66499H23.0939C23.5941 7.66499 23.9999 7.25924 23.9999 6.75899V5.32124C23.9999 4.82099 23.5941 4.41524 23.0939 4.41524L12.2549 4.41449Z" fill="#DDDDDD"/>
          <path d="M11.8928 12.588C11.8673 12.6352 11.8366 12.6772 11.8103 12.7252V13.5855H23.0941C23.5943 13.5855 24.0001 13.1797 24.0001 12.6802V11.2425C24.0001 10.7422 23.5943 10.3365 23.0941 10.3365H13.6531C13.3973 11.3047 12.7651 12.3172 11.8928 12.588Z" fill="#DDDDDD"/>
          <path d="M16.4956 18.9135V19.509H23.0941C23.5943 19.509 24.0001 19.1032 24.0001 18.603V17.1652C24.0001 16.665 23.5943 16.2592 23.0941 16.2592H15.7253C16.2098 17.028 16.4956 17.9362 16.4956 18.9135Z" fill="#DDDDDD"/>
        </svg>
        <span :class="[getZeroActiveIndex]">Персональный данные</span>

      </div>
      <div :class="['menu__el', getOneActiveIndex]" @click="changeActiveIndex(1)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 2.12024V15.0528L7.18391 8.58647L0 2.12024Z" fill="#DDDDDD"/>
          <path d="M19.6525 1.05566H1.18262L10.4176 9.36811L19.6525 1.05566Z" fill="#DDDDDD"/>
          <path d="M15.4291 10.1866C15.6713 9.82234 15.9574 9.48444 16.2849 9.18146C17.3119 8.23117 18.6469 7.70781 20.044 7.70781C20.3127 7.70781 20.5767 7.72743 20.8352 7.76457V2.12024L13.6514 8.58647L15.4291 10.1866Z" fill="#DDDDDD"/>
          <path d="M20.0439 9.29016C17.8626 9.29016 16.0879 11.0648 16.0879 13.2462V17.4058C16.0879 18.7146 17.1527 19.7794 18.4615 19.7794C19.7703 19.7794 20.8351 18.7146 20.8351 17.4058V13.2462H19.2527V17.4058C19.2527 17.8421 18.8978 18.197 18.4615 18.197C18.0252 18.197 17.6703 17.8421 17.6703 17.4058V13.2462C17.6703 11.9374 18.7351 10.8726 20.0439 10.8726C21.3527 10.8726 22.4176 11.9374 22.4176 13.2462V17.4058C22.4176 19.5872 20.6429 21.3619 18.4615 21.3619C16.2802 21.3619 14.5055 19.5872 14.5055 17.4058L14.5191 12.8507L14.5246 12.7853C14.5557 12.41 14.6259 12.0425 14.7303 11.6867L12.4686 9.6509L10.4176 11.4971L8.36653 9.6509L1.18262 16.1172H12.923V17.4058C12.923 20.4597 15.4076 22.9443 18.4615 22.9443C21.5154 22.9443 24 20.4597 24 17.4058V13.2462C24 11.0648 22.2253 9.29016 20.0439 9.29016Z" fill="#DDDDDD"/>
        </svg>
        <span :class="getOneActiveIndex">Рассылка</span>

      </div>
      <div :class="['menu__el', getTwoActiveIndex]" @click="changeActiveIndex(2)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_209_58)">
            <path d="M23.9867 15.3333C23.9867 15.687 23.8463 16.0261 23.5962 16.2761C23.3462 16.5262 23.007 16.6667 22.6534 16.6667H19.9867V19.3333C19.9867 19.687 19.8463 20.0261 19.5962 20.2761C19.3462 20.5262 19.007 20.6667 18.6534 20.6667C18.2998 20.6667 17.9606 20.5262 17.7106 20.2761C17.4605 20.0261 17.3201 19.687 17.3201 19.3333V16.6667H14.6534C14.2998 16.6667 13.9606 16.5262 13.7106 16.2761C13.4605 16.0261 13.3201 15.687 13.3201 15.3333C13.3201 14.9797 13.4605 14.6406 13.7106 14.3905C13.9606 14.1405 14.2998 14 14.6534 14H17.3201V11.3333C17.3201 10.9797 17.4605 10.6406 17.7106 10.3905C17.9606 10.1405 18.2998 10 18.6534 10C19.007 10 19.3462 10.1405 19.5962 10.3905C19.8463 10.6406 19.9867 10.9797 19.9867 11.3333V14H22.6534C23.007 14 23.3462 14.1405 23.5962 14.3905C23.8463 14.6406 23.9867 14.9797 23.9867 15.3333Z" fill="#DDDDDD"/>
            <path d="M18.6667 7.33331C20.6369 7.33262 22.5373 8.06284 24 9.38264V4.66664C23.9979 3.96004 23.7163 3.28299 23.2167 2.78335C22.717 2.28371 22.04 2.00208 21.3334 1.99997H2.6667C2.50068 1.9972 2.33496 2.01512 2.17337 2.05331C1.64669 2.14998 1.16186 2.40453 0.783225 2.78316C0.404587 3.1618 0.150041 3.64663 0.0533675 4.17331C0.0151799 4.3349 -0.00273574 4.50062 3.41609e-05 4.66664V15.3333C-0.00273574 15.4993 0.0151799 15.665 0.0533675 15.8266C0.150041 16.3533 0.404587 16.8381 0.783225 17.2168C1.16186 17.5954 1.64669 17.85 2.17337 17.9466C2.33496 17.9848 2.50068 18.0027 2.6667 18V20.6666C2.66569 20.9304 2.74397 21.1884 2.89138 21.4071C3.03878 21.6258 3.24851 21.7952 3.49337 21.8933C3.65161 21.9679 3.82513 22.0045 4.00003 22C4.35424 22.001 4.6945 21.862 4.9467 21.6133L8.00003 18H11.1334C10.7025 16.7941 10.5682 15.5022 10.7416 14.2335C10.9151 12.9647 11.3913 11.7563 12.13 10.7103C12.8688 9.66433 13.8483 8.81144 14.986 8.22368C16.1237 7.63591 17.3861 7.33053 18.6667 7.33331Z" fill="#DDDDDD"/>
          </g>
          <defs>
            <clipPath id="clip0_209_58">
              <rect width="24" height="24" fill="white"/>
            </clipPath>
          </defs>
        </svg>
        <span :class="[getTwoActiveIndex]">Акции</span>
      </div>

      <div :class="['menu__active', getActiveClass]"></div>
    </div>
  </div>
</template>

<script>
import {computed, ref} from "vue"

export default {
  emits: ['action'],
  setup(props, { emit }) {
    const activeIndex = ref(0)
    const changeActiveIndex = (index) => {
      let math
      if (activeIndex.value < index) {
        math = 'sum'
      } else {
        math = 'min'
      }
      activeIndex.value = index
      emit('action', index, math)
    }

    const getActiveClass = computed(() => {
      if (activeIndex.value === 0) {
        return ''
      } else if (activeIndex.value === 1) {
        return 'activeFirst'
      } else {
        return 'activeSecond'
      }
    })

    const getOneActiveIndex = computed(() => {
      return activeIndex.value === 1 ? 'active' : ''
    })

    const getTwoActiveIndex = computed(() => {
      return activeIndex.value === 2 ? 'active' : ''
    })

    const getZeroActiveIndex = computed(() => {
      return activeIndex.value === 0 ? 'active' : ''
    })

    return {
      activeIndex,
      changeActiveIndex,
      getActiveClass,
      getOneActiveIndex,
      getTwoActiveIndex,
      getZeroActiveIndex
    }
  },
}
</script>
